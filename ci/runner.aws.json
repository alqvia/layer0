{
  "AWSEBDockerrunVersion": 2,
  "volumes": [
    {
      "name": "DockerSock",
      "host": {
        "sourcePath": "/var/run/docker.sock"
      }
    }
  ],
  "containerDefinitions": [
    {
      "name": "gitlab-ci-runner",
      "image": "d.ims.io/xfra/gitlab-ci-runner:v1",
      "working_dir": "/home/gitlab-runner",
      "essential": true,
      "memory": 1024,
      "environment": [
        { "name": "RUNNER_TAG_LIST", "value": "xfra-layer0"},
        { "name": "REGISTER_NON_INTERACTIVE", "value": "true" },
        { "name": "REGISTER_LEAVE_RUNNER", "value": "false" },
        { "name": "CI_SERVER_URL", "value": "https://gitlab.imshealth.com/ci" },
        { "name": "REGISTRATION_TOKEN", "value": "6fzK5zajWyEgLihz-uzq" },
        { "name": "RUNNER_EXECUTOR", "value": "docker" },
        { "name": "DOCKER_IMAGE", "value": "d.ims.io/xfra/gitlab-ci-runner:v1" },
        { "name": "DOCKER_PRIVILEGED", "value": "true" },
        { "name": "DOCKER_VOLUMES", "value": "/var/run/docker.sock:/var/run/docker.sock:rw" }
      ],

      "mountPoints": [
        {
          "sourceVolume": "DockerSock",
          "containerPath": "/var/run/docker.sock"
        }
      ],
      "entrypoint": ["/entrypoint"],
      "command": [ "run", "--user=gitlab-runner", "--working-directory=/home/gitlab-runner" ]
    }
  ]
}
